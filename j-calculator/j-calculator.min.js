function generateGUID(){do{var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}while(-1<GUIDList.indexOf(e));return e}function toFunc(e){if("function"==typeof e)return e;if("string"==typeof e){if(null!=window[e]&&"function"==typeof window[e])return window[e];try{return new Function(e)}catch(e){}}return function(){return e}}function Obj(){this._parent=null,this._handlers=[],this._onceHandlers=[],this._elements=$(),this.guid=generateGUID(),this.on=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._handlers.push({event:e[n],handler:t});return this},this.once=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._onceHandlers.push({event:e[n],handler:t});return this},this.off=function(e,t){if(void 0===t&&"function"==typeof e){t=e;for(var n=0;n<this._handlers.length;n++)this._handlers[n].handler==t&&this._handlers.splice(n--,1)}else if(void 0===t&&"string"==typeof e){e=e.toLowerCase().split(" ");for(n=0;n<this._handlers.length;n++)-1<e.indexOf(this._handlers[n].event)&&this._handlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(n=0;n<this._handlers.length;n++)-1<e.indexOf(this._handlers[n].event)&&this._handlers[n].handler==t&&this._handlers.splice(n--,1)}return this},this.offOnce=function(e,t){if(void 0===t&&"function"==typeof e){t=e;for(var n=0;n<this._onceHandlers.length;n++)this._onceHandlers[n].handler==t&&this._onceHandlers.splice(n--,1)}else if(void 0===t&&"string"==typeof e){e=e.toLowerCase().split(" ");for(n=0;n<this._onceHandlers.length;n++)-1<e.indexOf(this._onceHandlers[n].event)&&this._onceHandlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(n=0;n<this._onceHandlers.length;n++)-1<e.indexOf(this._onceHandlers[n].event)&&this._onceHandlers[n].handler==t&&this._onceHandlers.splice(n--,1)}return this},this.trigger=function(e,t){e=e.toLowerCase().split(" ");for(var n=0;n<this._handlers.length;n++)(-1<e.indexOf(this._handlers[n].event)||"all"==this._handlers[n].event)&&toFunc(this._handlers[n].handler).call(this,this._handlers[n].event,t);for(n=0;n<this._onceHandlers.length;n++)(-1<e.indexOf(this._onceHandlers[n].event)||"all"==this._handlers[n].event)&&(toFunc(this._onceHandlers[n].handler).call(this,this._onceHandlers[n].event,t),this._onceHandlers.splice(n--,1));return this},this.renderer=function(){return $("<div class='Obj'></div>")},this.refresher=function(e){return this.renderer.apply(this)},this.destroyer=function(e){},this.render=function(e,s){var r=this;if(void 0===e)e="body";if(void 0===s)s="replace";else s=s.toLowerCase();var i=[].slice.call(arguments,2),h=this;return $(e).each(function(e,t){t=$(t);var n=$(r.renderer.apply(r,i));n.attr("guid",r.guid),r._elements=r._elements.add(n),"append"==s?t.append(n):"prepend"==s?t.prepend(n):"after"==s?t.after(n):"before"==s?t.before(n):"return"==s?h=n:"none"==s||(t.after(n),t.remove())}),this.trigger("render"),h},this.refresh=function(){for(var e=$(),t=0;t<this._elements.length;t++){var n=this._elements.eq(t),s=this.refresher.call(this,n);e=s?(s.attr("guid",this.guid),this._elements=this._elements.not(n),n.after(s),n.remove(),e.add(s)):e.add(n)}return this._elements=e,this},this.destroy=function(){var s=this;return this._elements.each(function(e,t){var n=$(t);s.destroyer.call(s,n)}),this._elements.remove(),this._elements=$(),delete Objs[this.guid],this},Objs[this.guid]=this}var GUIDList=[],Objs={};
var JApp=window.JApp||{};$=$||jQuery,window.JApp=function(e){var o="eapps",s="",t={};return e.getDefaultHoster=function(){return s||o},e.isLoadedDefHoster=function(){return 0!==s.length},e.getHosters=function(){return t},e.isLoadedHosters=function(){return 0!==Object.keys(t).length},e.url={getPlatformsInfoHost:function(){return"//platforms-info.jelastic.com"},getUserDefHosterURL:function(){return e.url.getPlatformsInfoHost()+"/api/user/getdefhoster"},getHosters:function(){return"//platforms-info.jelastic.com/api/site/GetHosters"},getPrices:function(){return"//platforms-info.jelastic.com/api/GetPricings"},getCurrecies:function(){return"//platforms-info.jelastic.com/api/GetCurrency"}},e.loadHosters=function(r){$.ajax({type:"GET",url:JApp.url.getHosters(),async:!1,success:function(e){if(0!==e.result||!e.hosters)throw new Error("Can not get hosters");t=e.hosters,$.each(t,function(e){if("servint"===this.keyword)return t.splice(e,1),!1}),t.sort(function(e,r){var t=e.keyword.toLowerCase(),n=r.keyword.toLowerCase();return t<n?-1:n<t?1:0}),r&&r(t)}})},e.loadDefaultHoster=function(n,e){e=e||{},$.ajax({type:"POST",url:JApp.url.getUserDefHosterURL(),data:{criteria:JSON.stringify(e)},async:!1,success:function(e){var r=jQuery.parseJSON(e)||{};0===r.result&&r.response&&(r=r.response),s=r.hoster,n&&n(s)},error:function(e,r,t){s=o,n&&n()}})},e}(window.JApp||{}),JApp.pricing=function(e){var t={},n={};return e.getPricing=function(){return t},e.getCurrecies=function(){return n},e.isLoadedPricing=function(){return 0!==Object.keys(t).length},e.isLoadedCurrencies=function(){return 0!==Object.keys(n).length},e.loadCurrencies=function(r){$.ajax({type:"GET",url:JApp.url.getCurrecies(),dataType:"json",async:!1,success:function(e){0===e.result&&((n=e.response.objects).sort(function(e,r){var t=e.code.toLowerCase(),n=r.code.toLowerCase();return t<n?-1:n<t?1:0}),$.each(n,function(e){"USD"!==this.code&&"EUR"!==this.code||n.splice(0,0,n.splice(e,1)[0])}),r&&r(n))},error:function(e){throw new Error(e)}})},e.loadPricings=function(r){$.ajax({type:"GET",url:JApp.url.getPrices(),dataType:"json",async:!1,success:function(e){if(0!==e.result)throw new Error("Can not get pricing models");t=e.response.pricings,r&&r(t)},error:function(e){throw new Error(e)}})},e}(JApp.pricing||{});
JApp.pricing=JApp.pricing||{},JApp.pricing.Calculator=function(e){var P=this;if(P.loaded=!1,P.sCurrentHoster="servnet",P.oHosters=[],P.pricing={},P.currencies="",P.element=e.oElement,P.sKey=e.sKey,P.hosterCurrency="USD",P.oLanguages=[],P.startCurrency="",P.localization={txChoose:"Choose Service Provider of Jelastic Public Cloud",txPerfomance:"Perfomance",txSupport:"Support",txLocation:"Location",txServices:"Advanced Services",balancerTxt:P.element.getAttribute("data-balancer-tx")||"Balancer",AppServerTxt:P.element.getAttribute("data-appserver-tx")||"App Server",DatabaseTxt:P.element.getAttribute("data-db-tx")||"Database",DiskTxt:P.element.getAttribute("data-disk-tx")||'Disk Space<span class="small">GB / hour</span>',DiscTooltipTxt:P.element.getAttribute("data-disk-tooltip-tx")||"Amount of disk space consumed per hour. While checking per month price, the calculator considers that you use the stated number of GB every hour during the whole period. The platform will count only consumed resources on hourly basis, so the total price can be lower.",IpTxt:P.element.getAttribute("data-ip-tx")||"Public IP",TrafficTxt:P.element.getAttribute("data-traffic-tx")||'External Traffic<span class="small">GB / hour</span>',TrafficTooltipTxt:P.element.getAttribute("data-traffic-tooltip-tx")||"Amount of external traffic consumed per hour. While checking per month price, the calculator considers that you use the stated number of GB every hour during the whole period. The platform will count only consumed resources on hourly basis, so the total price can be lower.",ReservedTxt:P.element.getAttribute("data-reserved-tx")||"Reserved",ReservedCloudletsTxt:P.element.getAttribute("data-reserved-cloudlets-tx")||"Reserved Cloudlets",ReservedDescriptionTxt:P.element.getAttribute("data-reserved-tooltip-tx")||"Reserve the cloudlets to pay a fixed price. The more you reserve, the bigger the discount is!",ScalingLimitTxt:P.element.getAttribute("data-scaling-limit-tx")||"Scaling Limit",ScalingDescriptionTxt:P.element.getAttribute("data-scaling-tooltip-tx")||"Define the maximum amount of resources for automatic vertical scaling based on load changes",totalTxt:P.element.getAttribute("data-total-tx")||"Total Cloudlets",hourlyTxt:P.element.getAttribute("data-hourly-tx")||"Per Hour",monthlyTxt:P.element.getAttribute("data-monthly-tx")||"Per Month",priceMinTxt:P.element.getAttribute("data-price-min-tx")||"Starting Price",priceMaxTxt:P.element.getAttribute("data-price-max-tx")||"Maximum Price",priceMaxDescrTxt:P.element.getAttribute("data-price-max-descr-tx")||"if all resources are fully used up to Scaling Limit",balancerMin:P.element.getAttribute("data-balancer-min")||0,balancerMax:P.element.getAttribute("data-balancer-max")||128,appServerMin:P.element.getAttribute("data-appserver-min")||0,appServerMax:P.element.getAttribute("data-appserver-max")||128,databaseMin:P.element.getAttribute("data-database-min")||0,databaseMax:P.element.getAttribute("data-database-max")||128},P.fixed="",P.dynamic="",P.ip="",P.network="",P.storage="",P.period="",P.cloudlets={balancer:{reserved:P.element.getAttribute("data-balancer-reserved")||0,scaling:P.element.getAttribute("data-balancer-scaling")||0,nodes:P.element.getAttribute("data-balancer-nodes")||1},appserver:{reserved:P.element.getAttribute("data-appserver-reserved")||1,scaling:P.element.getAttribute("data-appserver-scaling")||64,nodes:P.element.getAttribute("data-appserver-nodes")||1},database:{reserved:P.element.getAttribute("data-database-reserved")||0,scaling:P.element.getAttribute("data-database-scaling")||0,nodes:P.element.getAttribute("data-database-nodes")||1},storage:P.element.getAttribute("data-storage")||10,ip:P.element.getAttribute("data-ip")||1,traffic:P.element.getAttribute("data-traffic")||10},P.setReservedCloudlets=function(e,t){P.cloudlets[t].reserved=e,P.setMinValues(t)},P.setScalingCloudlets=function(e,t){0===e?($(P.element).find("label[for*="+t+"]").removeClass("active"),$(P.element).find("label[for*="+t+"] .node-count input").val(0).change()):($(P.element).find("label[for*="+t+"]").hasClass("active")||(0===P.cloudlets[t].nodes?$(P.element).find("label[for*="+t+"] .node-count input").val(1).change():$(P.element).find("label[for*="+t+"] .node-count input").val(P.cloudlets[t].nodes).change()),$(P.element).find("label[for*="+t+"]").addClass("active")),P.cloudlets[t].scaling=e,P.setMaxValues(t)},P.convertMib=function(e){return 1e3<(e*=128)?parseFloat(e/1024).toFixed(2)+" GiB":e+" MiB"},P.convertMhz=function(e){return 1e3<(e*=400)?parseFloat(e/1e3).toFixed(2)+" GHz":e+" MHz"},P.changePricePeriod=function(e){switch(P.period){case"hourly":e=Math.round(1e3*e)/1e3;break;case"monthly":e=(730*e).toFixed(2)}return e},P.checkStoragePrice=function(){sValue=P.cloudlets.storage;var e=P.storage.tiers;if(price=e[0].price,sValue<e[0].value)return 0;for(var t=0;t<e.length;t++){if(!e[t+1])return 0<e[e.length-1].free&&sValue<=e[e.length-1].free?0:(sValue-e[e.length-1].free)*e[e.length-1].price;if(sValue>=e[t].value&&sValue<e[t+1].value)return 0<e[t].free&&sValue<=e[t].free?0:(price=e[t].price,(sValue-e[t].free)*price)}},P.checkIpPrice=function(){sValue=P.cloudlets.ip;var e=P.ip.tiers,t=e[0].price;if(sValue<e[0].value)return 0;for(var r=0;r<e.length;r++)if(e[r+1]){if(sValue>=e[r].value&&sValue<e[r+1].value)return 0<e[r].free&&sValue<=e[r].free?0:(t=e[r].price,sValue*t)}else{if(0<e[e.length-1].free&&sValue<=e[e.length-1].free)return 0;t=e[e.length-1].price}return sValue*t},P.checkTrafficPrice=function(){sValue=P.cloudlets.traffic;var e=P.network.tiers;if(different=0,sValue<e[0].value)return 0;for(var t=0;t<e.length;t++){var r;if(different=sValue-e[t].value,!e[t+1])return 0<e[e.length-1].free?((r=sValue-e[e.length-1].free)<0&&(r=0),r*e[e.length-1].price):e[e.length-1].price*sValue;if(sValue>=e[t].value&&sValue<e[t+1].value)return 0<e[t].free?((r=sValue-e[t].free)<0&&(r=0),r*e[t].price):sValue*e[t].price}},P.setPrice=function(){var t="",r="",a=$(P.element).find(".current-switcher").val();$.each(P.currencies,function(e){a===this.code&&(t=this.rate.USD),P.hosterCurrency===this.code&&(r=this.rate.USD)});var e=P.checkPrice("balancer"),n=P.checkPrice("appserver"),l=P.checkPrice("database"),i=P.checkMaxPrice("balancer"),s=P.checkMaxPrice("appserver"),c=P.checkMaxPrice("database"),o=P.checkStoragePrice(),d=P.checkIpPrice(),u=P.checkTrafficPrice(),p=e+n+l;p=p+o+d+u,p=P.toCurrency(p,r,t),p=P.changePricePeriod(p),$(P.element).find(".start-price .price").html(p);var h=i+s+c;h=h+o+d+u,h=P.toCurrency(h,r,t),+(h=P.changePricePeriod(h))<+p&&(h=p),$(P.element).find(".max-price .price").html(h);var f=P.cloudlets.balancer.reserved*P.cloudlets.balancer.nodes,g=P.cloudlets.appserver.reserved*P.cloudlets.appserver.nodes,m=P.cloudlets.database.reserved*P.cloudlets.database.nodes,v=P.convertMib(+f+ +g+ +m),b=P.convertMhz(+f+ +g+ +m);$(P.element).find(".reserved-totals .gibs").html(v),$(P.element).find(".reserved-totals .ghz").html(b),$(P.element).find(".reserved-totals .balancer").html(f),$(P.element).find(".reserved-totals .appserver").html(g),$(P.element).find(".reserved-totals .database").html(m),$(P.element).find(".reserved-totals .cloudlets-total").html(+f+ +g+ +m);var x=f+""+g+m;8<=x.length?$(P.element).find(".calculator-right").addClass("new-row"):$(P.element).find(".calculator-right").removeClass("new-row");var y=P.cloudlets.balancer.scaling*P.cloudlets.balancer.nodes,A=P.cloudlets.appserver.scaling*P.cloudlets.appserver.nodes,C=P.cloudlets.database.scaling*P.cloudlets.database.nodes,k=P.convertMib(+y+ +A+ +C),w=P.convertMhz(+y+ +A+ +C);$(P.element).find(".scaling-totals .gibs").html(k),$(P.element).find(".scaling-totals .ghz").html(w),$(P.element).find(".scaling-totals .balancer").html(y),$(P.element).find(".scaling-totals .appserver").html(A),$(P.element).find(".scaling-totals .database").html(C),$(P.element).find(".scaling-totals .cloudlets-total").html(+y+ +A+ +C),x=y+""+A+C,$(P.element).find(".calculator-right").hasClass("new-row")||(8<=x.length?$(P.element).find(".calculator-right").addClass("new-row"):$(P.element).find(".calculator-right").removeClass("new-row"))},P.checkPrice=function(e){var t=P.cloudlets[e].reserved*P.cloudlets[e].nodes,r=P.fixed.tiers;if(t<1)return 0;for(var a=0;a<r.length;a++){if(a===r.length-1)return t-r[r.length-1].value<=r[r.length-1].free?r[r.length-1].price*r[r.length-1].value:r[r.length-1].price*t;if(t>=r[a].value&&t<r[a+1].value)return t-r[a].value<=r[a].free?r[a].price*r[a].value:t*r[a].price}},P.checkMaxPrice=function(e){var t=P.cloudlets[e].scaling*P.cloudlets[e].nodes,r=P.cloudlets[e].reserved*P.cloudlets[e].nodes,a=P.dynamic.tiers;if(0==t)return 0;for(var n=this.checkPrice(e),l=t-r,i=0;i<a.length;i++){if(i===a.length-1)return l<=a[a.length-1].free?n:a[a.length-1].price*l+n;if(l>=a[i].value&&l<a[i+1].value)return l<=a[i].free?n:l*a[i].price+n}},P.toCurrency=function(e,t,r){return t/r*e},P.setMinValues=function(e){var t=P.cloudlets[e].reserved,r=$(P.element).find("."+e+"-range .addui-slider-handle").eq(0),a=$(P.element).find("."+e+"-range .reserved .dot"),n=r.offset().left-$(a).offset().left+$(a).outerWidth()+10;0<n?$(a).html('<span class="line more" style="width:'+(n+2)+'px"></span>'):$(a).html('<span class="line less" style="width:'+Math.abs(n)+'px"></span>');var l=P.convertMib(t),i=P.convertMhz(t);$(P.element).find("."+e+"-range .min-block .digits").html("<span>"+l+"</span><span>"+i+"</span>")},P.setMaxValues=function(e){var t=P.cloudlets[e].scaling,r=$(P.element).find("."+e+"-range .addui-slider-handle").eq(1),a=$(P.element).find("."+e+"-range .sl .dot"),n=r.offset().left-$(a).offset().left+$(a).outerWidth()+10;0<n?$(a).html('<span class="line more" style="width:'+(n+2)+'px"></span>'):$(a).html('<span class="line less" style="width:'+Math.abs(n)+'px"></span>');var l=P.convertMib(t),i=P.convertMhz(t);$(P.element).find("."+e+"-range .max-block .digits").html("<span>"+l+"</span><span>"+i+"</span>")},P.decreaseReserved=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];t>e._settings.min&&(t--,e.value=t+","+r)},P.increaseReserved=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];t<e._settings.max&&(t===r&&r++,t++,e.value=t+","+r)},P.decreaseScaling=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];r>e._settings.min&&(t===r&&t--,r--,e.value=t+","+r)},P.increaseScaling=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];r<e._settings.max&&(r++,e.value=t+","+r)},P.Slider=function(e,t){var r=$(e),a={};r.attr("name")&&(a.name=r.attr("name")),r.attr("class")&&(a.class=r.attr("class")),r.attr("id")&&(a.id=r.attr("id")),r.attr("value")&&(a.value=r.attr("value")),r.attr("min")&&(a.min=r.attr("min")),r.attr("max")&&(a.max=r.attr("max")),r.attr("step")&&(a.step=r.attr("step")),a.storage=P.storage,a.ip=P.ip,a.fixed=P.fixed,a.dynamic=P.dynamic,a.network=P.network,a.calculator=P,t=$.extend(a,r.data(),t);var n=new $add.SliderObj(t);return n.render(r,"replace"),n},P.onlyUnique=function(e,t,r){return r.indexOf(e)===t},P.renderHosterSelector=function(){P.loaded=!1,sHtml=new EJS({url:"/j-calculator/templates/j-hoster-selector"}).render({localization:P.localization,defHoster:P.sCurrentHoster,hosters:P.oHosters});for(var e,t=0;e=P.oHosters[t];t++)P.sCurrentHoster===e.keyword&&(P.sKey=e.key,P.sCurrentHoster=e.keyword,$(P.element).attr("data-custom-signup",e.customSignUp));0<$(P.element).find(".hoster-selector").length?$(P.element).find(".hoster-selector").replaceWith(sHtml):$(P.element).append(sHtml),$(P.element).find(".hoster-selector--select").each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var r=e.next("div.select-styled");r.text(e.children("option:selected").text());for(var a=$("<ul />",{class:"select-options"}).insertAfter(r),n=0;n<t;n++){var l="";e.children("option").eq(n).text()===e.children("option:selected").text()&&(l="current-hoster");var i=$("<li />",{text:e.children("option").eq(n).text(),rel:e.children("option").eq(n).val(),class:l}).appendTo(a),s=$("<span />",{class:"flags"}).appendTo(i),c=e.children("option").eq(n).attr("data-location").split(",").filter(P.onlyUnique);$.each(c,function(e,t){$("<i />",{class:"flag flag-"+t,text:t}).appendTo(s)})}var o=a.children("li");r.click(function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),o.click(function(e){e.stopPropagation(),r.text($(this).text()).removeClass("active"),P.sCurrentHoster=this.getAttribute("rel"),P.renderHosterSelector(),P.renderCalculator(),a.hide()}),$(document).click(function(){r.removeClass("active"),a.hide()})})},P.renderCalculator=function(){var e=P.pricing[P.sKey].tariffPlans;0<e.length&&$.each(e,function(){"fixed"===this.type.toLowerCase()&&(P.fixed=this),"flexible"===this.type.toLowerCase()&&(P.dynamic=this),"network"===this.type.toLowerCase()&&(P.network=this),"storage"===this.type.toLowerCase()&&(P.storage=this),"ip"===this.keyword.toLowerCase()&&(P.ip=this)});var t=new EJS({url:"/j-calculator/templates/j-calculator"}).render({localization:P.localization,oLanguages:P.oLanguages,id:Math.round(1e8*Math.random()),currencies:P.currencies,startCurrency:P.startCurrency,period:P.period,cloudlets:P.cloudlets});0<$(P.element).find(".calculator-wrapper").length?$(P.element).find(".calculator-wrapper").replaceWith(t):$(P.element).append(t),P.element.setAttribute("data-mode","appserver");for(var r,a=0;r=P.oHosters[a];a++)P.sKey===r.key&&(P.hosterCurrency=r.currencyCode);$(P.element).find(".current-switcher").each(function(){var t=$(this),e=$(this).children("option").length;t.addClass("select-hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select-styled"></div>');var r=t.next("div.select-styled");r.html(t.children("option:selected").attr("data-sign")+" - "+t.children("option:selected").html());for(var a=$("<ul />",{class:"select-options"}).insertAfter(r),n=0;n<e;n++){var l="";t.children("option").eq(n).text()===t.children("option:selected").text()&&(l="current-currency");var i=$("<li />",{text:t.children("option").eq(n).html(),rel:t.children("option").eq(n).val(),class:l}).appendTo(a);$("<span />",{class:"currency-sign",text:t.children("option").eq(n).attr("data-sign")+" - "}).prependTo(i),$("<span />",{class:"currency-name",text:t.children("option").eq(n).attr("data-name")}).appendTo(i)}var s=a.children("li");r.click(function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),s.click(function(e){a.find(".current-currency").removeClass("current-currency"),$(this).addClass("current-currency"),e.stopPropagation(),r.html($(this).html()).removeClass("active"),t.val(this.getAttribute("rel")).change(),a.hide()}),$(document).click(function(){r.removeClass("active"),a.hide()})});var n={appserver:P.Slider($(P.element).find(".appserver-range input"),""),balancer:P.Slider($(P.element).find(".balancer-range input"),""),database:P.Slider($(P.element).find(".database-range input"),"")};$(P.element).find('input[name*="mode"]').click(function(e){P.element.setAttribute("data-mode",this.value),P.setMinValues(P.element.getAttribute("data-mode")),P.setMaxValues(P.element.getAttribute("data-mode"))}),$(P.element).find('input[name*="mode"][value=appserver]').click(),$(P.element).find(".min-block-decrease").click(function(e){e.preventDefault();var t=n[P.element.getAttribute("data-mode")];P.decreaseReserved(t)}),$(P.element).find(".min-block-increase").click(function(e){e.preventDefault();var t=n[P.element.getAttribute("data-mode")];P.increaseReserved(t)}),$(P.element).find(".max-block-decrease").click(function(e){e.preventDefault();var t=n[P.element.getAttribute("data-mode")];P.decreaseScaling(t)}),$(P.element).find(".max-block-increase").click(function(e){e.preventDefault();var t=n[P.element.getAttribute("data-mode")];P.increaseScaling(t)}),$(P.element).find(".node-count input").change(function(e){var t=$(this);P.cloudlets[this.getAttribute("name")].nodes=+this.value,parseInt(t.val())>parseInt(t.attr("max"))&&t.val(t.attr("max")).change(),(parseInt(t.val())<0||""===t.val())&&t.val(0).change(),P.setPrice()}),$(P.element).find(".digit").change(function(e){var t=$(this);P.cloudlets[this.getAttribute("name")]=+this.value,parseInt(t.val())>parseInt(t.attr("max"))&&t.val(t.attr("max")).change(),(parseInt(t.val())<0||""===t.val())&&t.val(0).change(),P.setPrice()}),$(P.element).find(".plus").click(function(e){e.preventDefault();var t=$(this).closest(".inner").find(".digit");t.val(parseInt(t.val())+1).change()}),$(P.element).find(".minus").click(function(e){e.preventDefault();var t=$(this).closest(".inner").find(".digit");0<parseInt(t.val())&&t.val(parseInt(t.val())-1).change()}),$(P.element).find(".plus-node").click(function(e){e.preventDefault();var t=$(this).closest(".node-count").find("input");t.val(parseInt(t.val())+1).change()}),$(P.element).find(".minus-node").click(function(e){e.preventDefault();var t=$(this).closest(".node-count").find("input");0<parseInt(t.val())&&t.val(parseInt(t.val())-1).change()}),$(P.element).find(".calculator-right input").click(function(e){P.period=$(this).val(),P.setPrice()}),$(P.element).find(".current-switcher").change(function(e){P.setPrice()}),$(".j-calculator").removeClass("loading"),P.loaded=!0},P.getAllData=function(){var e=Math.round(1e8*Math.random());JApp.isLoadedHosters()?P.oHosters=JApp.getHosters():JApp.loadHosters(function(e){P.oHosters=e}),JApp.isLoadedDefHoster()?P.sCurrentHoster=JApp.getDefaultHoster():JApp.loadDefaultHoster(function(e){P.sCurrentHoster=e},e),JApp.pricing.isLoadedPricing()?P.pricing=JApp.pricing.getPricing():JApp.pricing.loadPricings(function(e){P.pricing=e}),$.each(P.oHosters,function(e,t){if(t.keyword===P.sCurrentHoster)return P.sKey=t.key,!1}),P.renderHosterSelector(),P.renderCalculator()},P.getHosterData=function(){$.ajax({type:"GET",url:"https://"+P.sKey+"/auth/GetDefaultPricingModels",dataType:"json",success:function(e){if(0!==e.result||!e.response.models[0])throw new Error("Can not get hoster pricing model");P.pricing[P.sKey]=e.response.models[0],$.ajax({type:"GET",url:"https://"+P.sKey+"/settings/GetHosterSettings",dataType:"json",success:function(e){if(0!==e.result||!e.response.settingsCurrencyCode)throw new Error("Can not get hoster default currency");P.hosterCurrency=P.element.getAttribute("data-hoster-currency")||e.response.settingsCurrencyCode,console.log(),P.renderCalculator()},error:function(e){throw new Error(e)}})},error:function(e){throw new Error(e)}})},!P.element)throw new Error("Ooops! Something was wrong!");JApp.pricing.isLoadedCurrencies()?P.currencies=JApp.pricing.getCurrecies():JApp.pricing.loadCurrencies(function(e){P.currencies=e}),P.oLanguages=P.element.getAttribute("data-languages")||["java","php","node","python","go","ruby"],Array.isArray(P.oLanguages)||(P.oLanguages=P.oLanguages.split(",").map(function(e){return e.trim()})),P.period=P.element.getAttribute("data-period")||"hourly",P.startCurrency=P.element.getAttribute("data-start-currency")||"USD",P.sKey?P.getHosterData():P.getAllData()},jQuery(document).ready(function(e){var t=e(".j-calculator"),r=[];0<t.length&&e.each(t,function(e){this.classList.add("loading");var t={oElement:this};this.getAttribute("data-key")&&(t.sKey=this.getAttribute("data-key")),r[e]=new JApp.pricing.Calculator(t)}),e(window).resize(function(){e(r).each(function(){this.loaded&&(this.setMinValues(this.element.getAttribute("data-mode")),this.setMaxValues(this.element.getAttribute("data-mode")))})})});
if(void 0===$add)var $add={version:{},auto:{disabled:!1}};$add.version.Slider="2.0.1",$add.SliderObj=function(e){function m(t,e){return Math.round(t*(1/e))/(1/e)}function _(t){return isNaN(parseFloat(t))&&0<t.length?_(t.substr(1)):parseFloat(t)}Obj.apply(this),this._settings={direction:"horizontal",min:0,max:100,step:.1,value:50,formatter:function(t){if(-1<(this._settings.step+"").indexOf("."))var e=(this._settings.step+"").split(".").pop().length;else e=0;_(t);if(t<0){var s=!0;t=0-t}else s=!1;if(isNaN(t))return"NaN";var i=Math.floor(t),n=t-i;for(n=Math.round(n*Math.pow(10,e)),n+="";n.length<e;)n="0"+n;return(s?"-":"")+i+(0<e?"."+n:"")},timeout:2e3,range:!1,id:!1,name:"",class:"",fixed:"",dynamic:"",calculator:""},Object.defineProperty(this,"settings",{get:function(){return this.trigger("getsetting settings",this._settings),this._settings},set:function(t){this._settings=$.extend(this._settings,e),this.trigger("setsettings settings",this._settings),this.refresh()}}),Object.defineProperty(this,"value",{get:function(){return this.trigger("getvalue value",this._settings.value),this._settings.value},set:function(t){var a=this;if(this._settings.value=t,this._elements.find(".addui-slider-input").val(this._settings.value),this._settings.range){var d=m(parseFloat(this._settings.value.split(",")[0]),this._settings.step),l=m(parseFloat(this._settings.value.split(",")[1]),this._settings.step),e=this._settings.max-this._settings.min,s=d-this._settings.min,i=l-this._settings.min,o=s/e*100,r=i/e*100;this._elements.each(function(t,e){var s=$(e),i=$(s.closest('[class*="-range"]'))[0].className.replace("-range","");"vertical"==a._settings.direction?(s.find(".addui-slider-handle").eq(0).css("bottom",o+"%"),s.find(".addui-slider-handle").eq(1).css("bottom",r+"%"),s.find(".addui-slider-range").css("bottom",o+"%").css("height",r-o+"%")):(s.find(".addui-slider-start-distance").css("width","calc("+o+"% + 30px)"),s.find(".addui-slider-handle").eq(0).css("left",o+"%"),s.find(".addui-slider-handle").eq(1).css("left",r+"%"),s.find(".addui-slider-range").css("left",o+"%").css("width",r-o+"%"),s.find(".addui-slider-distance").css("width","calc("+(100-r)+"% + 31px)"));var n=$(a._settings.calculator.element).attr("data-cloudlets-tx")||"cloudlets";$("."+i+"-range .reserved-cloudlets").html(toFunc(a._settings.formatter).call(a,d)+" "+n),$("."+i+"-range .scaling-cloudlets").html(toFunc(a._settings.formatter).call(a,l)+" "+n),a._settings.calculator.setReservedCloudlets(d,i),a._settings.calculator.setScalingCloudlets(l,i),a._settings.calculator.setPrice()})}else{var n=m(_(this._settings.value)-this._settings.min,this._settings.step)/(this._settings.max-this._settings.min)*100;"vertical"==this._settings.direction?(this._elements.find(".addui-slider-handle").css("bottom",n+"%"),this._elements.find(".addui-slider-range").css("height",n+"%"),this._elements.find(".addui-slider-range").css("bottom","0%")):(this._elements.find(".addui-slider-handle").css("left",n+"%"),this._elements.find(".addui-slider-range").css("width",n+"%")),this._elements.find(".addui-slider-value span").html(toFunc(this._settings.formatter).call(this,this._settings.value))}}}),this.renderer=function(){var r=this,h=$("<div class='addui-slider addui-slider-"+this._settings.direction+(this._settings.range?" addui-slider-isrange":"")+" "+this._settings.class+"' "+(this._settings.id?"id='"+this._settings.id+"'":"")+"></div>"),t=($("<input class='addui-slider-input' type='hidden' name='"+this._settings.name+"' value='"+this._settings.value+"' />").appendTo(h),$("<div class='addui-slider-track'></div>").appendTo(h));$("<div class='addui-slider-range'></div>").appendTo(t);if(this._settings.range){$("<div class='addui-slider-start-distance'></div>").appendTo(t);var e=$("<div class='addui-slider-handle addui-slider-handle-l'><div class='addui-slider-value'><span></span></div></div>").appendTo(t),s=null;function i(t){if(t.preventDefault(),"vertical"==r._settings.direction){if("touchmove"==t.type)var e=t.originalEvent.changedTouches[0].pageY;else e=t.pageY;var s=h.offset().top+h.height()-e,i=r._settings.max-r._settings.min,n=s/h.height()*100}else{if("touchmove"==t.type)var a=t.originalEvent.changedTouches[0].pageX;else a=t.pageX;var d=a-h.offset().left;i=r._settings.max-r._settings.min,n=d/h.width()*100}var l=m(n/100*i+r._settings.min,r._settings.step);l=Math.min(r._settings.max,Math.max(r._settings.min,l));var o=m(_(r._settings.value.split(",")[1]),r._settings.step);o<l&&(o=l),r.value=l+","+o}function n(t){$(window).off("mousemove touchmove",i),s=setTimeout(function(){e.removeClass("addui-slider-handle-active")},r._settings.timeout)}e.on("mousedown touchstart",function(t){clearTimeout(s),e.addClass("addui-slider-handle-active"),$(window).on("mousemove touchmove dragmove",i),$(window).one("mouseup touchend",n)});var a=$("<div class='addui-slider-handle addui-slider-handle-h'><div class='addui-slider-value'><span></span></div></div>").appendTo(t),d=null;$("<div class='addui-slider-distance'></div>").appendTo(t);function l(t){if(t.preventDefault(),"vertical"==r._settings.direction){if("touchmove"==t.type)var e=t.originalEvent.changedTouches[0].pageY;else e=t.pageY;var s=(h.offset().top+h.height()-e)/h.height()*100}else{if("touchmove"==t.type)var i=t.originalEvent.changedTouches[0].pageX;else i=t.pageX;s=(i-h.offset().left)/h.width()*100}var n=m(s/100*(r._settings.max-r._settings.min)+r._settings.min,r._settings.step);n=Math.min(r._settings.max,Math.max(r._settings.min,n));var a=m(_(r._settings.value.split(",")[0]),r._settings.step);n<a&&(a=n),r.value=a+","+n}function o(t){$(window).off("mousemove touchmove",l),d=setTimeout(function(){a.removeClass("addui-slider-handle-active")},r._settings.timeout)}a.on("mousedown touchstart",function(t){clearTimeout(d),a.addClass("addui-slider-handle-active"),$(window).on("mousemove touchmove dragmove",l),$(window).one("mouseup touchend",o)})}else{var g=$("<div class='addui-slider-handle'><div class='addui-slider-value'><span></span></div></div>").appendTo(t),u=null;function c(t){if(t.preventDefault(),"vertical"==r._settings.direction){if("touchmove"==t.type)var e=t.originalEvent.changedTouches[0].pageY;else e=t.pageY;var s=(h.offset().top+h.height()-e)/h.height()*100}else{if("touchmove"==t.type)var i=t.originalEvent.changedTouches[0].pageX;else i=t.pageX;s=(i-h.offset().left)/h.width()*100}var n=m(s/100*(r._settings.max-r._settings.min),r._settings.step)+r._settings.min;n=Math.min(r._settings.max,Math.max(r._settings.min,n)),r.value=m(n,r._settings.step)}function v(t){$(window).off("mousemove touchmove",c),u=setTimeout(function(){g.removeClass("addui-slider-handle-active")},r._settings.timeout)}g.on("mousedown touchstart",function(t){clearTimeout(u),g.addClass("addui-slider-handle-active"),$(window).on("mousemove touchmove dragmove",c),$(window).one("mouseup touchend",v)}),h.on("click",function(t){if(t.preventDefault(),"vertical"==r._settings.direction){if("touchmove"==t.type)var e=t.originalEvent.changedTouches[0].pageY;else e=t.pageY;var s=(h.offset().top+h.height()-e)/h.height()*100}else{if("touchmove"==t.type)var i=t.originalEvent.changedTouches[0].pageX;else i=t.pageX;s=(i-h.offset().left)/h.width()*100}var n=m(s/100*(r._settings.max-r._settings.min),r._settings.step)+r._settings.min;n=Math.min(r._settings.max,Math.max(r._settings.min,n)),clearTimeout(u),g.addClass("addui-slider-handle-active"),u=setTimeout(function(){g.removeClass("addui-slider-handle-active")},r._settings.timeout),r.value=n})}return h},this.init=function(t){var e=this;if(this.settings=t,this._settings.range){if(-1<(a=this._settings.value+"").indexOf(",")){var s=a.split(","),i=_(s[0]);i=m(i=Math.min(this._settings.max,Math.max(this._settings.min,i)),this._settings.step);var n=_(s[1]);n=m(n=Math.min(this._settings.max,Math.max(this._settings.min,n)),this._settings.step)}else{var a;if((a=m(Math.max(this._settings.min,Math.min(this._settings.max,_(this._settings.value))),this._settings.step))<(this._settings.max-this._settings.min)/2)i=a,n=this._settings.max-a;else n=a,i=this._settings.min+a}this._settings.value=i<n?i+","+n:n+","+i}else this._settings.value=Math.max(this._settings.min,Math.min(this._settings.max,_(this._settings.value)));this.on("render",function(){e.value=e._settings.value}),this.trigger("init",{settings:this._settings})},this.init.apply(this,arguments)};